<html>
<head>
  <title>ulf</title>
  <style>
    body{margin:0;}
    canvas{ width:100%; height: 100%;}
    #data{color: white; position: absolute;}
  </style>
</head>
<body>
  <p id="data">
    Vx: <span id="vx"></span><br>
    Vy: <span id="vy"></span><br>
    Vz: <span id="vz"></span><br>
    <br>
    x: <span id="px"></span><br>
    y: <span id="py"></span><br>
    z: <span id="pz"></span><br>
  </p>
  <script src="https://ajax.googleapis.com/ajax/libs/threejs/r69/three.min.js"></script>
  <script src="scripts/flightControl.js"></script>
  <script>
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      var geometry = new THREE.BoxGeometry( 1, 0.3, 1 );
      var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
      var cube = new THREE.Mesh( geometry, material );
      scene.add( cube );

      camera.position.z = 5;
      var clock =  new THREE.Clock(),
          controls = flightControl();


      var render = function () {
        delta = clock.getDelta()/4;
        requestAnimationFrame( render );

        if(controls.x.neg){
          controls.velocities.x -= delta;
        }if(controls.x.pos){
          controls.velocities.x += delta;
        }if(!controls.x.pos && !controls.x.neg){
          controls.velocities.decrease(delta, 'x');
        }if(controls.y.neg){
          controls.velocities.y -= delta;
        }if(controls.y.pos){
          controls.velocities.y += delta;
        }if(!controls.y.pos && !controls.y.neg){
          controls.velocities.decrease(delta, 'y');
        }if(controls.z.neg){
          controls.velocities.z -= delta;
        }if(controls.z.pos){
          controls.velocities.z += delta;
        }if(!controls.z.pos && !controls.z.neg){
          controls.velocities.decrease(delta, 'z');
        }if(controls.yaw.neg){
          cube.rotation.y -= 8*delta;
        }if(controls.yaw.pos){
          cube.rotation.y += 8*delta;
        }
        cube.translateX(controls.velocities.x);
        cube.translateY(controls.velocities.y);
        cube.translateZ(controls.velocities.z);

        // Display velocities on screen
        document.getElementById('vx').innerHTML = controls.velocities.x;
        document.getElementById('vy').innerHTML = controls.velocities.y;
        document.getElementById('vz').innerHTML = controls.velocities.z;

        document.getElementById('px').innerHTML = cube.position.x;
        document.getElementById('py').innerHTML = cube.position.y;
        document.getElementById('pz').innerHTML = cube.position.z;

        renderer.render(scene, camera);
      };

      render();

    </script>
</body>
</html>
