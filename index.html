<html>
<head>
  <title>My first Three.js</title>
  <style>
    body{margin:0;}
    canvas{ width:100%; height: 100%;}
    #data{color: white; position: absolute;}
  </style>
</head>
<body>
  <p id="data">
    Vx: <span id="vx"></span><br>
    Vy: <span id="vy"></span><br>
    Vz: <span id="vz"></span><br>
    <br>
    x: <span id="px"></span><br>
    y: <span id="py"></span><br>
    z: <span id="pz"></span><br>
  </p>
  <script src="https://ajax.googleapis.com/ajax/libs/threejs/r69/three.min.js"></script>
  <script>
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      var geometry = new THREE.BoxGeometry( 1, 0.3, 1 );
      var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
      var cube = new THREE.Mesh( geometry, material );
      scene.add( cube );

      camera.position.z = 5;
      var clock =  new THREE.Clock();

      var controls = {
        z:   { pos: false, neg: false },
        y:   { pos: false, neg: false },
        x:   { pos: false, neg: false },
        yaw: { pos: false, neg: false }
      };
      var velocities = {
        z: 0,
        y: 0,
        x: 0,
        decrease: function(t, axis){
          if(Math.abs(this[axis]) > 0){
            if(this[axis] < 0){
              this[axis] += 2*t;
              if(this[axis] > 0)
                this[axis] = 0;
            }else{
              this[axis] -= 2*t;
              if(this[axis] < 0)
                this[axis] = 0;
            }
          }
        }
      };

      var render = function () {
        delta = clock.getDelta()/4;
        requestAnimationFrame( render );

        if(controls.x.neg){
          velocities.x -= delta;
        }if(controls.x.pos){
          velocities.x += delta;
        }if(!controls.x.pos && !controls.x.neg){
          velocities.decrease(delta, 'x');
        }if(controls.y.neg){
          velocities.y -= delta;
        }if(controls.y.pos){
          velocities.y += delta;
        }if(!controls.y.pos && !controls.y.neg){
          velocities.decrease(delta, 'y');
        }if(controls.z.neg){
          velocities.z -= delta;
        }if(controls.z.pos){
          velocities.z += delta;
        }if(!controls.z.pos && !controls.z.neg){
          velocities.decrease(delta, 'z');
        }if(controls.yaw.neg){
          cube.rotation.y -= 8*delta;
        }if(controls.yaw.pos){
          cube.rotation.y += 8*delta;
        }
        cube.translateX(velocities.x);
        cube.translateY(velocities.y);
        cube.translateZ(velocities.z);

        // Display velocities on screen
        document.getElementById('vx').innerHTML = velocities.x;
        document.getElementById('vy').innerHTML = velocities.y;
        document.getElementById('vz').innerHTML = velocities.z;

        document.getElementById('px').innerHTML = cube.position.x;
        document.getElementById('py').innerHTML = cube.position.y;
        document.getElementById('pz').innerHTML = cube.position.z;

        renderer.render(scene, camera);
      };

      render();

      document.onkeydown = function(evt) {
          switch(evt.keyCode){
            case 65: /*A*/ controls.x.neg = true; break;
            case 68: /*D*/ controls.x.pos = true; break;
            case 75: /*K*/ controls.y.neg = true; break;
            case 73: /*I*/ controls.y.pos = true; break;
            case 87: /*W*/ controls.z.neg = true; break;
            case 83: /*S*/ controls.z.pos = true; break;
            case 74: /*J*/ controls.yaw.neg = true; break;
            case 76: /*L*/ controls.yaw.pos = true; break;
            case 32: /*space*/ reset(); break;
          };
      };
      document.onkeyup = function(evt) {
          switch(evt.keyCode){
            case 65: /*A*/ controls.x.neg = false; break;
            case 68: /*D*/ controls.x.pos = false; break;
            case 75: /*K*/ controls.y.neg = false; break;
            case 73: /*I*/ controls.y.pos = false; break;
            case 87: /*W*/ controls.z.neg = false; break;
            case 83: /*S*/ controls.z.pos = false; break;
            case 74: /*J*/ controls.yaw.neg = false; break;
            case 76: /*L*/ controls.yaw.pos = false; break;
          };
      };
      function reset(){
        cube.position.setX(0);
        cube.position.setY(0);
        cube.position.setZ(0);
        cube.rotation.y = 0;
        velocities.x = velocities.y = velocities.z = 0;
      }
    </script>
</body>
</html>
